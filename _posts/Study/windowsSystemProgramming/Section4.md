---
title: "System programming - section 4.  컴퓨터 구조에 대한 두 번쨰 이야기"
date: 2019-07-28 00:13:00
categories: WindowsSystemProgramming
---
# 컴퓨터 구조의 접근 방법
---
## 컴퓨터를 디자인 하자.
- 컴퓨터를 디자인 한다는 것은 크게 두 가지를 디자인한다는 것 과 같다.
    - 레지스터 디자인
    - 명령어 디자인

## 레지스터를 디자인하자
- 레지스터를 디자인 한다는 것은?!
    - **레지스터를 몇 비트로 구성할 것인가?**
        - N-bit system은 register의 사이즈가 N-bit이다.
        - 그 이유는, N-bit system의 경우 I/O bus명령어가 N-bit 단위로 움직이기 때문에 register가 I/O bus로 부터 값을 받기 위해서는 N-bit register가 되는 것이다.
    - **몇 개 정도로 레지스터를 구성할 것 인가?**
        - 레지스터의 개수는 많으면 많을 수록 좋으나, cost가 비싸므로 이를 고려하여 개수를 정하도록 하자.
    - **레지스터 각각을 무슨 용도로 사용할 것 인가?**
        - memory hierachy에서 보면 register만 각자의 담당하는 역할을 가지고 있다.
        - 다른 메모리들은 범용으로 활용된다.
        - 이렇게 각자의 담당하는 역할을 지니는 이유는 명령어가 단순해지고 빨라진다.
## 명령어구조 및 명령어를 디자인하자.
- N-bit의 register를 사용한다고 하면, 이 register에 명령어 값을 어떻게 넣을 것인가를 결정해야한다.
- 다음과 같이 구성해 볼 수 있다.(ex. 16bit system -> 16 bit I/O Bus -> 16bit register)
    - [15:14] : reserved
    - [13:11] : CMD
    - [10:8] : 결과저장 register
    - [7:4] : 피연산자 r1
    - [3:0] : 피연산자 r2
- 이런구조는 항상 유지되는 것이 아니다. 명령어에 따라서 구조는 변경 될 수 있다.
- 피연산자는 레지스터 또는 숫자가 될 수 있다.
- 피연산자 3bit일 경우, register 0~7까지 사용이 가능하다.
- 피연산자 3bit의 경우, 숫자는 0~7까지 밖에 못온다.
- 이때 Load나 Store 명령어의 경우 이렇게 제한적인 bit을 가지고는 메모리 전영역에 접근이 불가능 할 수 있다.
- 이렇게 direct mode의 경우 한계를 가지지만, 이를 Indirect Mode로 변경시, 더 넓은 영역에 대해서 접근이 가능하다.
- Indirect mode의 경우 우리가 보는 register에 적힌 영역에 접근하면 우리가 실제로 접근할 메모리 영역 주소 값이 있고, 우리는 이 값을 가지고 실제 address 값에 접근하여 읽거나 쓰는 동작을 하게 되는 것이다.
